/*! monex v0.9.18-SNAPSHOT | (c) 2019  | LGPL-2.1-only License | git+https://github.com/eXist-db/monex.git */
!(function(s){s.TimelineOptions=function(i){return{series:{lines:{lineWidth:1.2,fill:!0},points:{show:!1}},xaxis:{mode:"time",show:!0,timeformat:"%Y/%m/%d<br/>%H:%M:%S",ticks:10,axisLabel:"Time",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"sans-serif",axisLabelPadding:10},yaxis:{axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"sans-serif",axisLabelPadding:6,autoscaleMargin:.1},legend:{show:!0,labelBoxBorderColor:"#fff"},grid:{hoverable:!0,clickable:!0,autoHighlight:!0},selection:{mode:"x"},tooltip:!1}},s.TimelineSetup=function(i,t,e){var n=s.plot(i,t,e);s.TimelineFunctions(n,i,t,e)},s.TimelineFunctions=function(o,i,t,e){var n=o.getAxes().xaxis,a=n.options.min,l=n.options.max;s(document).on("chart:zoomIn",(function(i,t,e){var n=o.getAxes().xaxis.options;n.min=t,n.max=e,o.setupGrid(),o.draw()})),i.bind("plothover",(function(i,t,e){if(e){var n=e.datapoint[0].toFixed(2),o=e.datapoint[1].toFixed(2),a=new Date(n-0);s("#tooltip").html(e.series.label+" at "+a+" = "+o).css({top:e.pageY+5,left:e.pageX+5,display:"block"})}else s("#tooltip").hide()})),i.bind("plotselected",(function(i,t){s(document).trigger("chart:zoomIn",[t.xaxis.from,t.xaxis.to]),o.clearSelection()})),i.parent().parent().find(".zoom-out").click((function(i){i.preventDefault(),s(document).trigger("chart:zoomIn",[a,l])})),i.bind("plotclick",(function(i,t,e){e&&window.open("details.html?timestamp="+e.datapoint[0]+"&instance="+JMX_INSTANCE,"_blank")}))};var t={init:function(){var n=s.TimelineOptions();this.each((function(){var i=s(this),t=i.data("data"),e=s.plot(i,t,n);s.TimelineFunctions(e,i,t,n)}))}};s.fn.timeline=function(i){return t[i]?t[i].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof i&&i?void alert('Method "'+i+'" not found!'):t.init.apply(this,arguments)}})(jQuery);